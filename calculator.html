<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <style>
      html,
      body {
        height: 100%;
        margin: 0;
        font-family: Arial, sans-serif;
        font-size: 2vw;
      }
      input {
        width: 60%;
        height: 60%;
        font-size: 2vw;
        font-family: Arial, sans-serif;
      }
      button {
        width: 80%;
        height: 100%;
        font-size: 2vw;
        font-family: Arial, sans-serif;
      }
      .calculate_button {
        display: inline-block;
        cursor: pointer;
        text-align: center;
        text-decoration: none;
        outline: none;
        color: #fff;
        background-color: #04aa6d;
        border: none;
        border-radius: 15px;
        box-shadow: 0 5px #999;
      }

      .calculate_button:hover {
        background-color: #3e8e41;
      }

      .calculate_button:active {
        background-color: #3e8e41;
        box-shadow: 0 5px #666;
        transform: translateY(4px);
      }
      .reset_button {
        display: inline-block;
        cursor: pointer;
        text-align: center;
        text-decoration: none;
        outline: none;
        color: #fff;
        background-color: #d22b2b;
        border: none;
        border-radius: 15px;
        box-shadow: 0 5px #999;
        width: 50%;
      }

      .reset_button:hover {
        background-color: #880808;
      }

      .reset_button:active {
        background-color: #880808;
        box-shadow: 0 5px #666;
        transform: translateY(4px);
      }

      table {
        font-family: Arial, sans-serif;
      }
    </style>
    <title>Mission Challenge WRGTH2025 Calculator</title>
  </head>

  <body>
    <table width="100%" height="100%" border="2" cellpadding="1">
      <tbody>
        <tr>
          <td colspan="2">&nbsp;<b>ID</b></td>
          <td>
            &nbsp;<input
              type="text"
              name="text"
              id="teamID"
              value=""
              placeholder="enter ID"
            />&nbsp;
          </td>
          <td colspan="1">&nbsp;<b>ATTEMPT</b></td>
          <td>
            &nbsp;<input
              type="number"
              name="number"
              id="attempt"
              value="0"
              min="0"
            />&nbsp;
          </td>
        </tr>

        <tr>
          <td width="20%" bgcolor="black" style="color: white">&nbsp;ZONE</td>
          <td width="20%" bgcolor="black" style="color: white">
            &nbsp;MISSION
          </td>
          <td width="15%" bgcolor="black" style="color: white">&nbsp;SCORE</td>
          <td width="20%" bgcolor="black" style="color: white">&nbsp;FACTOR</td>
          <td width="25%" bgcolor="black" style="color: white">&nbsp;SUM</td>
        </tr>

        <tr>
          <td colspan="2" bgcolor="#398F87" style="color: white">&nbsp;LINE</td>
          <td>
            &nbsp;<input
              type="number"
              name="number"
              id="linePassed"
              value="0"
              min="0"
            />&nbsp;tms
          </td>
          <td>&nbsp; × 50 =</td>
          <td>&nbsp;<b id="linesum">0</b></td>
        </tr>

        <tr>
          <td colspan="2" bgcolor="#398F87" style="color: white">&nbsp;WALL</td>
          <td>
            &nbsp;<input
              type="number"
              name="number"
              id="wallPassed"
              value="0"
              min="0"
            />&nbsp;tms
          </td>
          <td>&nbsp; × 50 =</td>
          <td>&nbsp;<b id="wallsum">0</b></td>
        </tr>
        <tr>
          <td rowspan="6" bgcolor="#398F87" style="color: white">&nbsp;BALL</td>
          <td bgcolor="#398F87" style="color: white">&nbsp;ENTER</td>
          <td>
            &nbsp;<input
              type="number"
              name="number"
              id="enterPassed"
              value="0"
              min="0"
            />&nbsp;tms
          </td>
          <td>&nbsp; × 10 =</td>
          <td>&nbsp;<b id="entersum">0</b></td>
        </tr>
        <tr>
          <td bgcolor="#c30010" style="color: white">&nbsp;RED</td>
          <td>
            &nbsp;<input
              type="number"
              name="number"
              id="redCount"
              value="0"
              min="0"
              max="2"
            />&nbsp;pcs
          </td>
          <td>&nbsp; × 20 =</td>
          <td>&nbsp;<b id="redsum" style="color: red">0</b></td>
        </tr>

        <tr>
          <td bgcolor="green" style="color: white">&nbsp;GREEN</td>
          <td>
            &nbsp;<input
              type="number"
              name="number"
              id="greenCount"
              value="0"
              min="0"
              max="4"
            />&nbsp;pcs
          </td>
          <td>&nbsp; × 5 =</td>
          <td>&nbsp;<b id="greensum" style="color: green">0</b></td>
        </tr>
        <tr>
          <td bgcolor="#E3FF37" style="color: #0015a9">&nbsp;YELLOW</td>
          <td>
            &nbsp;<input
              type="number"
              name="number"
              id="yellowCount"
              value="0"
              min="0"
              max="4"
            />&nbsp;pcs
          </td>
          <td>&nbsp; × 5 =</td>
          <td>&nbsp;<b id="yellowsum" style="color: #7d7c00">0</b></td>
        </tr>
        <tr>
          <td bgcolor="#0015A9" style="color: white">&nbsp;BLUE</td>
          <td>
            &nbsp;<input
              type="number"
              name="number"
              id="blueCount"
              value="0"
              min="0"
              max="10"
            />&nbsp;pcs
          </td>
          <td>&nbsp; × 1 =</td>
          <td>&nbsp;<b id="bluesum" style="color: blue">0</b></td>
        </tr>
        <tr>
          <td bgcolor="#398F87" style="color: white">&nbsp;EXIT</td>
          <td>
            &nbsp;<input
              type="number"
              name="number"
              id="exitPassed"
              value="0"
              min="0"
            />&nbsp;tms
          </td>
          <td>&nbsp; × 10 =</td>
          <td>&nbsp;<b id="exitsum">0</b></td>
        </tr>

        <tr>
          <td colspan="2" bgcolor="#398F87" style="color: white">
            &nbsp;BINGO
          </td>
          <td>
            &nbsp;<input
              type="number"
              name="number"
              id="bingoBonus"
              value="0"
              min="0"
            />&nbsp;tms
          </td>
          <td>&nbsp; × 100 =</td>
          <td>&nbsp;<b id="bingosum">0</b></td>
        </tr>

        <tr>
          <td colspan="2" bgcolor="#398F87" style="color: white">
            &nbsp;SUPERBINGO
          </td>
          <td>
            &nbsp;<input
              type="number"
              name="number"
              id="superbingoBonus"
              value="0"
              min="0"
            />&nbsp;tms
          </td>
          <td>&nbsp; × 100 =</td>
          <td>&nbsp;<b id="superbingosum">0</b></td>
        </tr>
        <tr>
          <td>&nbsp;<b>RETRY</b></td>
          <td>
            &nbsp;<input
              type="number"
              name="retry"
              id="retry"
              value="0"
              min="0"
            />&nbsp;
          </td>
          <td>&nbsp;</td>
          <td>&nbsp;<b>TOTAL</b></td>
          <td>&nbsp;<b id="totalsum">0</b></td>
        </tr>
        <tr>
          <td>&nbsp;<b>TIME</b></td>
          <td>
            &nbsp;<input
              type="number"
              name="time"
              id="time"
              value="0"
              min="0"
            />&nbsp;sec
          </td>

          <td>
            &nbsp;<button
              class="reset_button"
              type="button"
              onclick="reset_score()"
            >
              Reset
            </button>
          </td>

          <td colspan="2">
            &nbsp;<button class="button" type="button" onclick="save()">
              Save
            </button>
          </td>
        </tr>
      </tbody>
    </table>

    <script>
      // calculate
      function calculateAuto() {
        // calculate each mission
        const lineValue =
          parseInt(document.getElementById("linePassed").value) || 0;
        document.getElementById("linesum").innerHTML = (
          lineValue * 50
        ).toString();

        const wallValue =
          parseInt(document.getElementById("wallPassed").value) || 0;
        document.getElementById("wallsum").innerHTML = (
          wallValue * 50
        ).toString();

        const enterValue =
          parseInt(document.getElementById("enterPassed").value) || 0;
        document.getElementById("entersum").innerHTML = (
          enterValue * 10
        ).toString();

        const redValue =
          parseInt(document.getElementById("redCount").value) || 0;
        document.getElementById("redsum").innerHTML = (
          redValue * 20
        ).toString();

        const greenValue =
          parseInt(document.getElementById("greenCount").value) || 0;
        document.getElementById("greensum").innerHTML = (
          greenValue * 5
        ).toString();

        const yellowValue =
          parseInt(document.getElementById("yellowCount").value) || 0;
        document.getElementById("yellowsum").innerHTML = (
          yellowValue * 5
        ).toString();

        const blueValue =
          parseInt(document.getElementById("blueCount").value) || 0;
        document.getElementById("bluesum").innerHTML = (
          blueValue * 1
        ).toString();

        const exitValue =
          parseInt(document.getElementById("exitPassed").value) || 0;
        document.getElementById("exitsum").innerHTML = (
          exitValue * 10
        ).toString();

        const bingoValue =
          parseInt(document.getElementById("bingoBonus").value) || 0;
        document.getElementById("bingosum").innerHTML = (
          bingoValue * 100
        ).toString();

        const superBingoValue =
          parseInt(document.getElementById("superbingoBonus").value) || 0;
        document.getElementById("superbingosum").innerHTML = (
          superBingoValue * 100
        ).toString();

        // คำนวณคะแนนรวม
        const totalSum =
          lineValue * 50 +
          wallValue * 50 +
          enterValue * 10 +
          redValue * 20 +
          greenValue * 5 +
          yellowValue * 5 +
          blueValue * 1 +
          exitValue * 10 +
          bingoValue * 100 +
          superBingoValue * 100;

        document.getElementById("totalsum").innerHTML = totalSum.toString();
      }

      // เพิ่ม event listener ให้กับ input ทุกตัว
      function addEventListeners() {
        const inputs = [
          "linePassed",
          "wallPassed",
          "enterPassed",
          "redCount",
          "greenCount",
          "yellowCount",
          "blueCount",
          "exitPassed",
          "bingoBonus",
          "superbingoBonus",
        ];

        inputs.forEach((inputId) => {
          const input = document.getElementById(inputId);
          input.addEventListener("input", calculateAuto);
          input.addEventListener("change", calculateAuto);
        });
      }

      // ฟังก์ชัน reset
      function reset_score() {
        const inputs = [
          "linePassed",
          "wallPassed",
          "enterPassed",
          "redCount",
          "greenCount",
          "yellowCount",
          "blueCount",
          "exitPassed",
          "bingoBonus",
          "superbingoBonus",
          "retry",
          "time",
        ];

        inputs.forEach((inputId) => {
          document.getElementById(inputId).value = "0";
        });

        const sums = [
          "linesum",
          "wallsum",
          "entersum",
          "redsum",
          "greensum",
          "yellowsum",
          "bluesum",
          "exitsum",
          "bingosum",
          "superbingosum",
          "totalsum",
        ];

        sums.forEach((sumId) => {
          document.getElementById(sumId).innerHTML = "0";
        });

        document.getElementById("teamID").value = "";
      }
      // save function
      function save() {
        const teamID = document.getElementById("teamID").value;
        if (!teamID) {
          alert("กรุณาใส่ Team ID ก่อนบันทึก");
          return;
        }

        const data = {
          teamID: teamID,
          attempt: document.getElementById("attempt").value,
          linePassed: document.getElementById("linePassed").value,
          wallPassed: document.getElementById("wallPassed").value,
          enterPassed: document.getElementById("enterPassed").value,
          redCount: document.getElementById("redCount").value,
          greenCount: document.getElementById("greenCount").value,
          yellowCount: document.getElementById("yellowCount").value,
          blueCount: document.getElementById("blueCount").value,
          exitPassed: document.getElementById("exitPassed").value,
          bingoBonus: document.getElementById("bingoBonus").value,
          superbingoBonus: document.getElementById("superbingoBonus").value,
          retry: document.getElementById("retry").value,
          time: document.getElementById("time").value,
          totalScore: document.getElementById("totalsum").innerHTML,
        };

        localStorage.setItem(teamID, JSON.stringify(data));
        alert("บันทึกข้อมูลเรียบร้อยแล้ว!");
      }

      // เรียกใช้เมื่อหน้าเว็บโหลดเสร็จ
      document.addEventListener("DOMContentLoaded", function () {
        addEventListeners();
        calculateAuto(); // คำนวณครั้งแรก
      });
    </script>
  </body>
</html>
